<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta charset="utf-8">
<title>MATLAB&reg; Machine Learning Tutorial</title>
<meta name="description"
  content="MATLAB<sup>&reg;</sup> Machine Learning Tutorial - RoboCup Rescue Simulation League">
<meta name="author" content="Luis Gustavo Nardin">
<meta name="author" content="Arnoud Visser">
<meta name="author" content="Sebastian Castro">

<meta name="mirror" content="A copy of the slides that can directly opened in a browser are available at:">
<meta name="url" content="https://staff.fnwi.uva.nl/a.visser/activities/MachineLearningForRescue/slides/">

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<link rel="stylesheet" href="reveal/css/reveal.min.css" />
<link rel="stylesheet" href="reveal/css/theme/simple.css" id="theme" />
<link rel="stylesheet" href="reveal/lib/css/zenburn.css" />
<script>
	document.write('<link rel="stylesheet" href="reveal/css/print/'
			+ (window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper')
			+ '.css" type="text/css" media="print">');
</script>

</head>
<body>

  <div class="reveal">
    <div class="slides">

      <!-- Title Slide -->
      <section>
        <h3>
          MATLAB<sup>&reg;</sup> Machine Learning Tutorial
        </h3>
        <h4>RoboCup Rescue Simulation League</h4>
        <h5>Arnoud Visser, Luis G. Nardin, and Sebastian Castro</h5>
      </section>

      <!-- TOC -->
      <section>
        <section>
          <h2>Table of Contents</h2>
          <ol>
            <li>Introduction to AI and Machine Learning (ML)
              <ul>
                <li>Artificial intelligence</li>
                <li>Machine learning</li>
                <li>Deep learning</li>
              </ul>
            </li>
            <li>AI and ML Techniques in RCRS</li>
            <li>AI for Precomputation
              <ul>
                <li>Path Planning (A*, Dijkstra)</li>
              </ul>
            </li>
            <li>ML for Precomputation
              <ul>
                <li>Clustering (K-Means++)</li>
              </ul>
            </li>
            <li>ML for Task Allocation</li>
            <li>Conclusion</li>
          </ol>
        </section>
      </section>

      <!-- Introduction to AI and ML Section -->
      <section>
        <section>
          <h2>Introduction to AI and Machine Learning (ML)</h2>
        </section>
        <section>
          <h3>Introduction to AI</h3>
          <p>
          <ul>
            <li>The question is: 'What is Artificial Intelligence'?
              <div align=center>
                <img src=images/simple-robot.png width=400>
              </div>
          </ul>
        </section>
        <section>
          <h3>Introduction to AI</h3>
          <p>
          <ul>
            <li>The answer of Russell and Norvig: 'A problem-solving
              agent'!
              <div align=center>
                <img src=images/amai-robot.jpg width=600>
              </div>
          </ul>
          <p>
            <small>Illustration courtesy Stuart Russell and Peter
              Norvig, <i>Artificial Intelligence - a Modern Approach</i>,
              Pearson.
            </small>
        </section>
        <section>
          <h3>Types of AI Problems</h3>
          <ul>
            <li>Basically... everything robots do!</li>
          </ul>
          <div align=center>
            <img src=images/wikipedia_ai_problems.png>
          </div>
          <small>Source: <a
            href="https://en.wikipedia.org/wiki/Artificial_intelligence">Wikipedia</a></small>
        </section>
        <section>
          <h3>Terminology</h3>
          <div align=center>
            <img src=images/ai_ml_dl.jpg>
          </div>
          <small>Source: <a
            href="https://medium.com/intro-to-artificial-intelligence/deep-learning-series-1-intro-to-deep-learning-abb1780ee20">Deep
              Learning Series 1: Intro to Deep Learning, Medium, Dhanoop
              Karunakaran</a></small>
        </section>
        <section>
          <h3>Types of AI Algorithms</h3>
          <div align=center>
            <img src=images/wikipedia_ai_tools.png>
          </div>
          <small>Source: <a
            href="https://en.wikipedia.org/wiki/Artificial_intelligence">Wikipedia</a></small>
        </section>
        <section>
          <h3>Machine Learning</h3>
          <ul>
            <li>Subset of AI</li>
            <li>Machine modifies its own algorithm/model/policy/etc. using
              data</li>
            <li>Human controls the "rules" of how this "learning" occurs,
              e.g.
              <ul>
                <li>Choosing a model and its initial state</li>
                <li>Choosing a learning algorithm</li>
                <li>Supplying data</li>
                <li>Enforcing constraints</li>
              </ul>
            </li>
            <li>Machine applies learning results autonomously on new
              data/environments/conditions/etc.</li>
          </ul>
        </section>
        <section>
          <h3>Types of ML Problems (and Examples)</h3>
          <ul>
            <li><strong>Classification:</strong>
              <ul>
                <li><i>Binary:</i> Detecting occupancy in a room</li>
                <li><i>Multi-class:</i> Detecting the type of animal in an
                  image</li>
              </ul></li>
            <li><strong>Regression:</strong> Predicting housing costs</li>
            <li><strong>Object detection:</strong> Locating all pedestrians
              in an image</li>
            <li><strong>Generation:</strong> Computer-generated music from
              input genre</li>
          </ul>
        </section>
        <section>
          <h3>Types of ML: Unsupervised Learning</h3>
          <ul>
            <li>Finding patterns from <strong>unlabeled</strong> data
            </li>
            <li>Machine develops its own insights and we have to make sense
              of them</li>
          </ul>
          <div align=center>
            <img src=images/clustering_example.png>
          </div>
          <small>Source: MathWorks Documentation</small>
        </section>
        <section>
          <h3>Types of ML: Supervised Learning</h3>
          <ul>
            <li>Determining a model from <strong>labeled</strong> data
            </li>
            <li>Goal: Identify labels accurately on new, independent data
          </ul>
          <div align=center>
            <img src=images/supervised_example.png>
          </div>
          <small>Source: MathWorks Documentation</small>
        </section>
        <section>
          <h3>Types of ML: Supervised Learning</h3>
          <ul>
            <li><strong>Perceptron:</strong> The first supervised learning
              approach</li>
            <li>Use optimization to parameterize a linear classifier</li>
            <li>Other supervised learning approaches extend this with more
              complex models and learning techniques</li>
          </ul>
          <div align=center>
            <img src=images/perceptron.gif width=700>
          </div>
          <small>Source: <a
            href="https://devashishshankar.wordpress.com/2015/11/13/demystifying-deep-neural-networks/">Demystifying
              deep neural networks, by Devashish Shankar</a></small>
        </section>
        <section>
          <h3>Types of ML: Reinforcement Learning</h3>
          <ul>
            <li>Technically, a type of supervised learning</li>
            <li>Human provides a mathematical cost/reward function</li>
            <li>Machine repeatedly acts in simulation or real-world trials,
              evaluates reward, and "learns" to maximize reward over time</li>
          </ul>
          <div align=center>
            <img src=images/deepmind.gif>
          </div>
          <small>Source: Google DeepMind</small>
        </section>
        <section>
          <h3>Deep Learning</h3>
          <ul>
            <li>Not a type of machine learning -- can be unsupervised,
              supervised, or reinforcement</li>
            <li>Example: "Deep reinforcement learning"
            <li>"Deep" refers to neural networks with many layers</li>
            <li>More layers = more nonlinear = better explains complex
              systems</li>
          </ul>
          <div align=center>
            <img src=images/neural_net_example.png width=600>
          </div>
          <small>Source <a
            href="https://towardsdatascience.com/applied-deep-learning-part-1-artificial-neural-networks-d7834f67a4f6">Applied
              Deep Learning - Part 1: Artificial Neural Networks, Towards Data
              Science, by Arden Dertat</a></small>
        </section>
      </section>

      <!-- AI and ML in RCRS -->
      <section>
        <section>
          <h2>
            AI and ML Techniques in the <br /> RoboCup Rescue Simulation League
          </h2>
        </section>
        <section>
          <h2>Rescue Simulation Challenges</h2>

          <div align="left">
            <ul>
              <li>Task allocation with uncertainty</li>
              <li>Coalition formation</li>
              <li>Cooperation</li>
              <li>Distributed versus centralized control</li>
              <li>Communication</li>
            </ul>
          </div>

          <small>Courtesy Skinner &amp; Ramchurn, AAMAS'10. </small>
        </section>

        <section>
          <h3>Rescue Simulation Tasks in ADF</h3>

          <div align="left">
            <ul>
              <li>Path Planning</li>
              <li>Clustering</li>
              <li>Target Detector</li>
            </ul>
          </div>
        </section>

        <section>
          <h3>AI and ML for Rescue Simulation</h3>

          <ul>
            <li>Path planning
              <ul>
                <li>A*, Dijkstra, depth-first</li>
              </ul>
            </li>
            <li>Clustering
              <ul>
                <li>K-Means, K-Medoids, Hierarchical Clustering, Gaussian
                  Mixture Models</li>
              </ul>
            </li>
            <li>Task Allocation
              <ul>
                <li>Supervised Learning
                  <ul>
                    <li>Classification</li>
                    <li>Regression</li>
                  </ul>
              </ul>
          </ul>
        </section>
        <!--        <section>
          <h2>Task allocation</h2>

          <ul>
            <li>The assignment problem can be formulated as follows:
              <ul>
                <li>A set <i>J</i> of tasks to be allocated to a set <i>I</i>
                  of agents
                <li>Each agent <i>i</i> has a capability <i>k<sub>ij</sub>
                    (0 ≤ k<sub>ij</sub> ≤ 1)
                </i> to perform each task <i>j</i>
                <li>An allocation matrix <i>A</i> is used to represent the
                  allocation, where <i>a<sub>ij</sub></i> is 1 if task <i>j</i>
                  is allocated to agent <i>i</i> and 0 otherwise.
                  <div align=center>
                    <img src=images/TaskAllocationFormula.png width=400>
                  </div>
              </ul>
          </ul>
          Ferreira <i>et al</i>, AAMAS'10. </small>
        </section> -->
      </section>
      <section>
        <section>
          <h2>AI for Precomputation</h2>
          <ul>
            <li>Path Planning (A*, Dijkstra, depth-first) <!--ul>
                    <li>Graph creation and visualization in MATLAB<sup>&reg;</sup></li>
                    <li>Integrate into ADF</li>
                  </ul-->
            </li>
            <!--li>Convex Hull</li-->
          </ul>
        </section>
        <!--#include file="pathplanning-slides.html" -->
        <!-- doesn't work!-->

        <section>
          <h3>Path-Planning and Artificial Intelligence</h3>

          <ul>
            <li>A problem-solving agent applies a <i>search strategy</i> on
              the problem:

              <div align=center>
                <img src=images/simple-problem-solving-agent.png width=800>
              </div>
            <li>So, we need a problem formulation <small>(both in
                Java and MATLAB<sup>&reg;</sup>)
            </small>.
          </ul>

          <p>
            <small>Illustration courtesy Stuart Russell and Peter
              Norvig, <i>Artificial Intelligence - a Modern Approach</i>,
              Pearson.
            </small>
          </p>
        </section>
        <section>
          <h3>Path-Planning as Graph Search</h3>

          <ul>
            <li>Imagine an agent that travels in Romania:

              <div align=center>
                <img src=images/Romania.jpg width=600>
              </div>
            <li>The goal is to get in Bucharest (from Arad).
          </ul>

          <p>
            <small>Illustration courtesy Stuart Russell and Peter
              Norvig, <i>Artificial Intelligence - a Modern Approach</i>,
              Pearson.
            </small>
          </p>
        </section>
        <section>
          <h3>Path-Planning as Graph Search</h3>

          <ul>
            <li>So, imagine an agent that travels on the TestMap:

              <div align=center>
                <img src=images/topo_metro.jpg width=600>
              </div>
            <li>The goal is to get in [905, 249, 298, 938, 939, 940] <br />
              (from node 976).
          </ul>
        </section>

        <section>
          <h3>Path-Planning as Graph Search</h3>

          <ul>
            <li>You not only have to find one solution:

              <div align=center>
                <img src=images/test_two_paths.jpg width=600>
              </div>
            <li>You also have to decide what is the best solution.
          </ul>
        </section>

        <section>
          <h3>Path-Planning as Graph Search</h3>

          <ul>
            <li>And you have to find it fast when the map gets bigger:

              <div align=center>
                <img src=images/ParisPGraph.jpg width=600>
              </div> That is where the <i>search strategy</i> gets important<br />
              (e.g. Dijkstra vs A*)
          </ul>
        </section>

        <section>
          <h3>A* Graph Search</h3>

          <p>
          <ul>
            <li>The Agent Development Framework has an A* implementation:

              <div align=center>
                <img src=images/EclipseUniformCostSearch.png width=900>
              </div> The problem is solved in 9 steps.
          </ul>

          <p>
            <small>This Java code is provided by Shunki Takami <i>et
                al.</i></small>
          </p>
        </section>

        <section>
          <h3>A* Graph Search</h3>

          <p>
          <ul>
            <li>The steps resembles Uniform-Cost Search:

              <div align=center>
                <img src=images/UniformCostSearch.png width=900>
              </div> With a heuristic cost function <font
              style="font-variant: small-caps">Path-Cost</font> this is A* <br />
              (with path so-far it is Dijkstra's algorithm).
          </ul>

          <p>
            <small>Illustration courtesy Stuart Russell and Peter
              Norvig, <i>Artificial Intelligence - a Modern Approach</i>,
              Pearson.
            </small>
          </p>
        </section>
        <section>
          <h3>Multi-Agent decision making</h3>

          <ul>
            <li>The actions of the agents are parameterized with the paths.

              <div align=center>
                <img src=images/Mircea-Figure1.1.png width=500>
              </div>
            <li>You need full control and insight in the characteristics of
              the paths.
          </ul>

          <p>
            <small>Illustration courtesy Mircea Traichioiu, <i>Hierarchical
                Decision Theoretic Planning for RoboCup Rescue Agent Simulation</i>,
              Master thesis, University of Amsterdam, 2014.
            </small>
          </p>
        </section>


        <section>
          <h3>
            Export Java data structure to MATLAB<sup>&reg;</sup>
          </h3>

          <p>
            <br />
          <p>
          <div align=left style="border: 2px solid black">
            <small> <code>
                <!-- &#09; is TAB -->
                For (Entity next: this.worldInfo.getEntities() ) {<br />
                &nbsp;&#09; loc = this.worldInfo.getLocation(next.getID()); <br />
                &nbsp;&#09;
                matlab.eval("G=addnode(G,table(next.getID(),loc.first(),loc.second());");<br />
                }<br /> For (Entity next: this.worldInfo.getEntities() )<br />
                &nbsp;&#09; Collection areaNeighbours = next.getNeighbours();<br />
                <br /> &nbsp;&#09; for(entityID neighbour : areaNeigbours) {<br />
                &nbsp;&#09;&nbsp;&#09;
                matlab.eval("G=addedge(G,find(next.getID()),find(neighbour.getID());");<br />
                &nbsp;&#09; }<br /> }<br />
                matlab.eval("save('graph.mat',G);");
              </code>
            </small>
          </div>
        </section>
        <section>
          <h3>Real Java-code</h3>

          <p>
          <ul>
            <li>A little more complex:

              <div align=center>
                <img src=images/matlab_init.png width=800>
              </div>
            <li>This code adds batches. An alternative is to create two
              complete lists and feed it at once to a MATLAB<sup>&reg;</sup>-function.












            
          </ul>
        </section>
        <section>
          <h3>Effect batch-size</h3>

          <p>
          <ul>
            <li>Adding the nodes to a graph of the Kobe map:

              <div align=center>
                <table>
                  <tr>
                    <td>no batch</td>
                    <td>15,7999 s</td>
                  </tr>
                  <tr>
                    <td>batch of 25</td>
                    <td>1,6564 s</td>
                  </tr>
                  <tr>
                    <td>batch of 250</td>
                    <td>0,6677 s</td>
                  </tr>
                  <tr>
                    <td>batch of 2500</td>
                    <td>0,42233 s</td>
                  </tr>
                </table>
              </div>
            <li>For Paris the whole process takes 52,75 s.
          </ul>
        </section>

        <section>
          <h3>Execute this Java-code as precompute process</h3>

          <p>
            <br />
          <p>
          <div align=left style="border: 2px solid black">
            <small> <code>
                cd ~ <br /> mkdir git<br /> cd git<br /> git clone
                https://github.com/roborescue/rcrs-server.git<br /> cd
                rcrs-server<br /> ant clean-all<br /> ant complete-build<br />
                <br /> cd boot<br /> ./start-precompute.sh -m
                ../maps/gml/kobe/map/ -c ../maps/gml/kobe/config/
              </code>
            </small>
          </div>

          <p>
            <br />
          <p>
          <div align=left style="border: 2px solid black">
            <small><code>
                cd ~ <br /> mkdir git<br /> cd git<br /> git clone
                https://github.com/IntelligentRoboticsLab/Joint-Rescue-Forces.git<br />
                cd Joint-Rescue-Forces<br /> ./precompute-matlab.sh 1 0 1 0 1 0
                localhost
              </code></small>
          </div>
        </section>
        <section>
          <h3>Load the graph into MATLAB workspace</h3>

          <p>
            <br />
          <p>
          <div align=left style="border: 2px solid black">
            <small> <code>
                load ../data/graph.mat<br />
                plot(G,'NodeLabel',cellstr(G.Nodes.ID));<br />
              </code>
            </small>
          </div>

          <p>
            <br />
          <p>
          <div align=left style="border: 2px solid black">
            <small> <code>
                figure(2)<br />
                plot(G,'xdata',G.Nodes.X,'ydata',G.Nodes.Y,'NodeLabel',cellstr(G.Nodes.ID));<br />
              </code>
            </small>
          </div>
        </section>
        <section>
          <h3>Visualize Graph</h3>

          <p>
          <ul>
            <li>The (<i>x, y</i>) positions of the nodes are known, but
              only the edges matter:

              <div align=center>
                <img src=images/kobe_topo.jpg height=300>&nbsp;<img
                  src=images/kobe_metric.jpg height=300>
              </div>
            <li>That is the connectivity and the distances of the edges.
          </ul>

          <p>

            <small></small>
        </section>
        <section>
          <h3>Plan shortest path</h3>

          <p>
          <div align=left style="border: 2px solid black">
            <small><code>
                from = find(G.Nodes.ID=="36373");<br /> target =
                [find(G.Nodes.ID=="33976") find(G.Nodes.ID=="35378")
                find(G.Nodes.ID=="34146")];<br /> [TR,D] =
                shortestpathtree(G,from,target,'OutputForm','cell');
              </code></small>
          </div>

        </section>
        <section>
          <h3>Path found</h3>

          <p>
          <ul>
            <li>There is a clear winner (both in number of steps and
              distance):

              <div align=center>
                <img src=images/kobe_three_paths_from_36373.jpg width=400>
              </div>
          </ul>


          <div align=left style="border: 2px solid black">
            <small> <code>
                D = <br /> &nbsp;&#09; 252553 68434 397069<br /> TR =<br />
                &nbsp;&#09; {1×37 double}<br /> &nbsp;&#09; {1×9 double}<br />
                &nbsp;&#09; {1×66 double}<br />
              </code>
            </small>
          </div>

          <p>

            <small>Highlight_path is a function of Peter Corke's
              Robotics toolbox</small>
        </section>
        <section>
          <h3>Find paths faster</h3>

          <p>
          <ul>
            <li>You can use different algorithms to plan a path:

              <div align=center>
                <img src=images/kobe_depth_first.jpg width=400>
              </div>
          </ul>


          <div align=left style="border: 2px solid black">
            <small> <code>
                PG.shortestpath(M(char("36373")),M(char("33976")),'algorithm',
                'depth-first', 'timer') <br /> costs=256829, time=0.087983<br />
                PG.shortestpath(M(char("36373")),M(char("33976")),'algorithm',
                'Astar', 'timer') <br /> costs=252553, time=0.095392<br />
                PG.shortestpath(M(char("36373")),M(char("33976")),'algorithm',
                'Dijkstra', 'timer') <br /> costs=252553, time=0.202984<br />
              </code>
            </small>
          </div>

          <p>
            <small>shortestpath is modification of Peter Corke's open
              source Astar implementation.</small>
          </p>
        </section>

        <section>
          <h3>Modify travel cost after disaster</h3>

          <ul>
            <li>After the earthquake building have collapsed and roads are
              (partly blocked):

              <div align=center>
                <img src=images/blockade.png width=300>
              </div>
            <li>In that case the travel costs can be increased:
          </ul>

          <div align=left style="border: 2px solid black">
            <small><code>
                neighbours = PG.neighbours(909);<br /> edges = PG.edges(909);<br />
                new_cost = 4 .* PG.cost(edges);<br /> [path_index,C] =
                PG.shortestpath(M(char("36373")),M(char("33976")),'algorithm',
                'Astar');
              </code></small>
          </div>

          <p>
            <small>Blockade illustration is courtesy Ali Modaresi.</small>
          </p>
        </section>

        <section>
          <h3>Astar will go around blockade</h3>

          <ul>
            <li>The edge was not removed, the travel-cost were only
              increased:

              <div align=center>
                <img src=images/kobe_astar_with_blockade.jpg width=400>
              </div>
            <li>The new path is the red path.
            <li>This can be done for each agent individually, based on
              observations and team-communication.
          </ul>

          <div align=center style="border: 2px solid black; font-size: larger">
            This is now your assignment!</div>
        </section>
      </section>
      <!-- ========================================================= -->
      <section>
        <section>
          <h2>ML for Precomputation</h2>
          <ul>
            <li>Clustering (K-Means++) <!--                   <ul>
                    <li>Type and collection of data</li>
                    <li>Visualize using MATLAB</li>
                    <li>Integrate into ADF</li>
                  </ul> -->
            </li>
          </ul>
        </section>
        <section>
          <h2>Clustering</h2>

          <ul>
            <li>Finding patterns from <strong>unlabeled</strong> data
            </li>
            <li>Basically, clustering is the task of <strong>dividing
                data points</strong> into a <strong>number of groups</strong>
              <ul>
                <li>data points in the same group more similar to each
                  other than to those in other groups</li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <h2>Clustering</h2>

          <ul>
            <li>Finding patterns from <strong>unlabeled</strong> data
            </li>
            <li>Generally, clustering is the task of <strong>dividing
                data points</strong> into a <strong>number of groups</strong>
              <ul>
                <li>data points in the same group more similar to each
                  other than to those in other groups</li>
              </ul>
            </li>
          </ul>
          <br /> <br />
          <p style="font-size: larger">
            <strong>How is clustering useful to Rescue Agent
              Simulation?</strong>
          </p>
        </section>

        <section>
          <h2>Clustering for <br> Agent Simulation</h2>

          <ul>
            <li>Teams use clustering during precomputation mostly for
              <ul>
                <li>partition the map by grouping buildings and roads based
                  on their location (<em>x, y</em>)
                </li>
              </ul>
            </li>
          </ul>
          <img src="images/building_clustering.png" width="40%">

          <p>
            Commonly, Partition Clustering Methods are used, such as <strong>K-Means++</strong>
            or <strong>K-Medoid</strong>
          </p>
        </section>

        <section>
          <h2>Clustering for Agent Simulation</h2>

          <ul>
            <li>Teams could also use clustering to group buildings based on
              their propensity to fire ignition inferred from properties like
              <ul>
                <li><code>floors</code></li>
                <li><code>totalArea</code></li>
                <li><code>fieryness</code></li>
                <li><code>temperature</code></li>
              </ul>
            </li>
            <li>Gaussian Mixture Models (GMM) may provide better results</li>
            <li>However, the clustering method
              <ul>
                <li><strong>maybe too complex</strong> to develop and
                  maintain, or</li>
                <li>there is a need to compare <strong>different
                    methods</strong></li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h2>
            MATLAB<sup>&reg;</sup> Clustering
          </h2>

          <ul>
            <li>MATLAB<sup>&reg;</sup> provides several clustering
              algorithms:
              <ul>
                <li>K-Means (Lloyd, 1982)</li>
                <li>K-Medoids (Kaufman &amp; Rousseeuw, 1987)</li>
                <li>Hierarchical Clustering (Kaufman &amp; Rousseeuw, 2008)</li>
                <li>Gaussian Mixture Models (Marin et al., 2005)</li>
                <li>Hidden Markov Models (Baum &amp; Petrie, 1966)</li>
              </ul>
            </li>
          </ul>
          <div align="right" style="font-size: 50%">
            https://www.mathworks.com/products/statistics/features.html</div>
        </section>

        <section>
          <h2>Generate Data</h2>

          <div style="float: left; width: 50%;">
            <img src="images/clustering-data.png">
          </div>
          <div style="float: right; width: 45%;">
            <ul>
              <li>Generated data format</li>
            </ul>
            <small><code>buildingID;x;y;totalArea;floors
                40964;1811658;238270;129;1 49162;1148956;194238;876;1
                57356;683596;1257545;500;1 57358;657794;1270839;801;1
                24591;1828352;222217;163;1</code></small>
          </div>
        </section>

        <section>
          <h3>Execute Java-code to generate data</h3>

          <div align=left style="border: 2px solid black">
            <small> <code>
                cd rcrs-server/boot<br /> ./start.sh -m
                $JOINT_RESCUE_FORCES/tutorial/paris/map/ -c
                $JOINT_RESCUE_FORCES/tutorial/paris/config/
              </code>
            </small>
          </div>

          <p>
            <br />
          <p>
          <div align=left style="border: 2px solid black">
            <small><code>
                cd Joint-Rescue-Forces<br /> ./data-generation.sh
              </code></small>
          </div>
        </section>

        <section>
          <h2>Import Data</h2>

          <div style="float: left; width: 50%;">
            <img src="images/matlab_import_data.png" />
          </div>
          <div style="float: left; width: 50%;">
            <ul>
              <li><strong>Import Selection</strong>
                <ul>
                  <li>Import Data</li>
                  <li>Generate a Script</li>
                  <li>Generate a Function</li>
                </ul></li>
            </ul>
          </div>
        </section>

        <section>
          <h2>
            MATLAB<sup>&reg;</sup> Processing
          </h2>

          <div align=left style="border: 2px solid black">
            <small><code>
                %% Perform k-Medoids clustering and plot the results<br />
                numMedoids = 5;<br /> [indices,centroids] = kmeans([buildings.x
                buildings.y],numMeans);<br /> <br /> figure<br /> hold on<br />
                gscatter(buildings.x,buildings.y,indices)<br />
                plot(centroids(:,1),centroids(:,2),'kx','MarkerSize',10,'LineWidth',2)<br />
                hLegend = legend;<br /> hLegend.String{end} = 'centroids';<br />
                title('k-Medoids Clustered Map'); xlabel('X position');
                ylabel('Y position');<br />
              </code> </small>
          </div>
          <br /> <br />
          <div align="left" style="font-size: 75%; border: 2px solid black">
            <p>
              <strong>Hands-on</strong>
            </p>
            <small><code>
                addpath('tutorial/scripts/clustering')<br />
                addpath('tutorial/data/unsupervised') <br />building_cluster
              </code></small>
          </div>
        </section>

        <section>
          <h2>
            Call MATLAB<sup>&reg;</sup> from Java
          </h2>

          <div style="float: left; width: 50%;">
            <img src="images/kmeans-code.png" />
          </div>
          <div style="float: left; width: 50%;">
            <ul>
              <li>Connect to MATLAB<sup>&reg;</sup>
                <ul>
                  <li><small><code>ml =
                        MatlabEngine.startMatlab();</code></small></li>
                </ul>
              </li>
              <li>Prepare the data
                <ul>
                  <li><small><code>double[][] mlInput</code></small></li>
                </ul>
              </li>
              <li>Run the <code>k-means</code> function
                <ul>
                  <li><small><code>Object[] mlOutput =
                        ml.feval( 2, "kmeans", (Object) mlInput,
                        this.clusterSize, DISTANCE, this.distanceMetric,
                        MAX_ITER, this.maxIter );</code></small></li>
                </ul>
              </li>
              <li>Process the results
                <ul>
                  <li><small><code>double[] mlIndex =
                        (double[]) mlOutput[0];</code></small></li>
                  <li><small><code>double[][] mlCenter =
                        (double[][]) mlOutput[1];</code></small></li>
                </ul>
              </li>
            </ul>
          </div>
        </section>

        <section>
          <h2>
            Connect to MATLAB<sup>&reg;</sup>
          </h2>

          <ul>
            <li>Start a MATLAB<sup>&reg;</sup><br /> <small><code>MatlabEngine
                  ml = MatlabEngine.startMatlab();</code></small>
            </li>
            <li>Connect to a shared MATLAB<sup>&reg;</sup><br /> <small><code>
                  if ( MatlabEngine.findMatlab().length > 0 ) {<br />
                  &nbsp;&nbsp;&nbsp;MatlabEngine ml =
                  MatlabEngine.connectMatlab();<br /> }
                </code></small><br />
              <ul>
                <li>Requires an instance of MATLAB<sup>&reg;</sup> open
                </li>
                <li>Session shared<br /> <small><code>matlab.engine.shareEngine</code></small>
                </li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h2>
            Call MATLAB<sup>&reg;</sup>
          </h2>

          <ul>
            <li>Evaluate an expression <br /> <small><code>[output1,...,outputN]
                  = eval(expression)</code></small><br /> <strong>Example:</strong><br /> <small><code>ml.eval('cd
                  tutorial;')</code></small><br />
            </li>
            <li>Evaluate a function <br /> <small><code>[y1,...,yN]
                  = feval(fun,x1,...,xM)</code></small> <br /> <strong>Example:</strong><br />
              <small><code>Object[] mlOutput = ml.feval( 2,
                  "kmeans", (Object) mlInput, 10, DISTANCE, 'cityblock',
                  MAX_ITER, 100 );</code></small>
            </li>
          </ul>
        </section>

        <section>
          <h2>Clustering Performance</h2>

          <img src="images/kmeans-performance.png" />
        </section>
      </section>

      <section>
        <section>
          <h2>ML for Task Allocation</h2>
          <ul>
            <li>Methodology for Target Selection</li>
          </ul>
        </section>

        <section>
          <h2>ML for Task Allocation</h2>

          <ul>
            <li>MATLAB<sup>&reg;</sup> can help optimize rescue operations
              by predicting more accurately certain future state
            </li>
            <li><strong>Example</strong><br /> Ambulance teams can
              optimize their rescue operations by predicting more accurately the
              chance of potential victims to survive.</li>
          </ul>
        </section>

        <section>
          <h2>Methodology</h2>

          <ol>
            <li>Generate data</li>
            <li>Import data into MATLAB<sup>&reg;</sup></li>
            <li>Train model in MATLAB<sup>&reg;</sup></li>
            <li>Integrate into ADF</li>
            <li>Refine the target selection model</li>
          </ol>
        </section>

        <section>
          <h2>Generate Data</h2>

          <div style="float: left; width: 50%;">
            <ul>
              <li>Start Rescue Time</li>
              <li>Initial Distance to Refuge</li>
              <li>Initial HP</li>
              <li>Initial Damage</li>
              <li>Burriedness</li>
              <li>End Time</li>
              <li>End Distance to Refuge</li>
              <li>End HP</li>
              <li>End Damage</li>
            </ul>
          </div>
          <div style="float: right; width: 50%;">
            <ul>
              <li>Generated data format</li>
            </ul>
            <div align="left">
              <small><code>
                  id;sTime;sDist;sHP;sDamage;eTime;eDist;eHP;eDamage<br />
                  2146824103;12;934003;10000;0;56;0;8500;0<br />
                  1285094217;12;1014231;10000;0;98;0;7000;80<br />
                  1329519353;16;74983;10000;0;62;0;8500;0<br />
                  2029710813;48;245461;8500;0;122;0;4500;80<br />
                  802454469;33;1254470;9500;0;109;0;6500;80<br />
                  1684298116;43;664753;9500;0;96;0;8500;0
                </code></small>
            </div>
          </div>
        </section>

        <section>
          <h3>Execute Java-code to generate data</h3>

          <div align=left style="border: 2px solid black">
            <small> <code>
                cd rcrs-server/boot<br /> ./start.sh -m
                $JOINT_RESCUE_FORCES/tutorial/paris/map/ -c
                $JOINT_RESCUE_FORCES/tutorial/paris/config/
              </code>
            </small>
          </div>

          <p>
            <br />
          <p>
          <div align=left style="border: 2px solid black">
            <small><code>
                cd Joint-Rescue-Forces<br /> ./data-generation.sh
              </code></small>
          </div>
        </section>

        <section>
          <h2>
            Import Data into MATLAB<sup>&reg;</sup>
          </h2>

          <div align=left style="font-size: 75%; border: 2px solid black">
            <small><code>
                addpath('tutorial/scripts/clustering')<br />
                addpath('tutorial/data/unsupervised')<br /> trainingData =
                importRescueData('training.csv');<br /> validationData =
                importRescueData('validation.csv');<br /> <br /> TData =
                trainingData(:, 2:end);<br /> VData = validationData(:, 2:end);
              </code> </small>
          </div>

          <h2>Categorize Data</h2>

          <div align=left style="font-size: 75%; border: 2px solid black">
            <small><code>
                hp_bins = [0 1 3000 7000 10000];<br /> bin_names = {'Dead',
                'Critical', 'Injured', 'Stable'};<br /> TData.hp_class =
                discretize(TData.eHP, hp_bins, 'categorical', bin_names);
              </code> </small>
          </div>
        </section>

        <section>
          <h2>
            Train model in MATLAB<sup>&reg;</sup>
          </h2>

          <ul>
            <li>Supervised machine learning methods can be applied to learn
              associations between observable variables and hidden variables
              (part of a causal model of the world).</li>
            <li>Estimates of the value of variables of a world model can be
              done with
              <ul>
                <li>discrete states (classification)</li>
                <li>continuous states (regression)</li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h2>
            Train model in MATLAB<sup>&reg;</sup>
          </h2>

          <ul>
            <li>We use the MATLAB<sup>&reg;</sup> Classification Learner
              app to train a model to predict the chance victims have to survive
              based on an estimate of the remaining health points (HP) at the
              end of the scenario simulation.
            </li>
          </ul>
        </section>

        <section>
          <h2>Classification Learner</h2>

          <img src="images/classification_learner.png" />
        </section>

        <!--section>
          <h2>Regression Learner</h2>

          <img src="images/regression.jpg" width=900 />
        </section-->

        <section>
          <h2>Classification Learner</h2>

          <ul>
            <li>Classification
              <ul>
                <li>Feature Selection</li>
                <li>Principal Component Analysis (PCA)</li>
                <li>Model Type</li>
                <li>Parallel Execution</li>
              </ul>
            </li>
            <li>Plots</li>
            <li>Export Model - Export Compact Model</li>
          </ul>
        </section>

        <section>
          <h2>Validation</h2>

          <div align=left style="font-size: 75%; border: 2px solid black">
            <small><code>
                // VData is the validation data<br /> predictions =
                targetSelectorModel.predictFcn(VData);<br /> <br /> numCorrect
                = nnz(predictions == VData.hp_class);<br /> validationAccuracy
                = numCorrect/size(VData,1);<br /> fprintf('Validation accuracy:
                %.2f%%\n', validationAccuracy * 100);
              </code></small>
          </div>
          <br />
          <ul>
            <li>The training and validation steps compose an iterative
              process whose cycle should be repeated until the validation
              accuracy is satisfactory.</li>
          </ul>
        </section>

        <section>
          <h2>Integrate into ADF</h2>
          <div align=left>
            <ul>
              <li>Create a function to call the trained model</li>
            </ul>
          </div>
          <div align=left style="font-size: 75%; border: 2px solid black">
            <small><code>
                function predictions = selectTargets(time,dist,hp,damage)<br />
                &nbsp;&nbsp;&nbsp;persistent targetSelectorModel<br />
                &nbsp;&nbsp;&nbsp;if isempty(targetSelectorModel)<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;load targetSelectorModel
                targetSelectorModel<br /> &nbsp;&nbsp;&nbsp;end<br />

                &nbsp;&nbsp;&nbsp;predictors = table(time,dist,hp,damage, ...<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'VariableNames',{'sTime','sDist','sHP','sDamage'});<br />
                <br /> &nbsp;&nbsp;&nbsp;predictions =
                int32(targetSelectorModel.predictFcn(predictors));<br /> end<br />
              </code></small>
          </div>
        </section>

        <section>
          <h2>Integrate into ADF</h2>

          <ul>
            <li>The function can then be called inside the <code>calc</code>
              method of the <code>HumanDetector</code> class for the ambulance
              team agents
            </li>
          </ul>

          <div align=left style="font-size: 75%; border: 2px solid black">
            <small><code>
                if ( MatlabEngine.findMatlab().length > 0 ) {<br />
                &nbsp;&nbsp;&nbsp;MatlabEngine ml =
                MatlabEngine.connectMatlab();<br /> &nbsp;&nbsp;&nbsp;int sTime
                = rescueTarget.sTime;<br /> &nbsp;&nbsp;&nbsp;int sDist =
                rescueTarget.sDist;<br /> &nbsp;&nbsp;&nbsp;int sHP =
                rescueTarget.sHP;<br /> &nbsp;&nbsp;&nbsp;int sDamage =
                rescueTarget.sDamage;<br /> <br /> &nbsp;&nbsp;&nbsp;int value
                = ml.feval( "selectTargets", sTime, sDist, sHP, sDamage );<br />
                <br /> &nbsp;&nbsp;&nbsp;ml.close();<br /> }
              </code> </small>
          </div>

          <div align=left>
            <p>
              <strong>Important</strong>
            </p>
            <ul>
              <li>Use <code>MatlabEngine.findMatlab()</code> and <code>MatlabEngine.connectMatlab()</code></li>
              <li>Requires a MATLAB<sup>&reg;</sup> session is Running and
                Shared (<code>matlab.engine.shareEngine</code>)
              </li>
            </ul>
          </div>
        </section>

        <section>
          <h2>Target Allocation Strategies</h2>

          <ul>
            <li>Ambulance team can combine the classification information
              with several other information about victims to determine which
              one to rescue</li>
            <li>Possible policies are
              <ol>
                <li><strong>classify all known victims</strong></li>
                <li><strong>discard the predicted dead</strong>, and
                <li><strong>select</strong>
                  <ol>
                    <li>random victim among them</li>
                    <li>the closest victim</li>
                    <li>the closest victim that is predicted <code>Critical</code></li>
                  </ol></li>
              </ol>
            </li>
          </ul>
        </section>
      </section>
      <!-- ========================= TBC  ========================== -->
      <section>
        <section>
          <h2>Conclusions</h2>

          In this workshop we have demonstrated<br>the use of several AI
          and ML techniques:
          <ul>
            <li>Problem solving
              <ul>
                <li>Path-planning <small>(Astar, Dijkstra)</small>
              </ul>
            <li>Unsupervised learning:
              <ul>
                <li>Classification <small>(k-means clustering of
                    city blocks)</small>
              </ul>
            <li>Supervised learning:
              <ul>
                <li>Classification <small>(k-nearest neighbour
                    prediction of victim class) </small>
                <li>Regression <small>(bagged tree model of
                    remaining HP of victim) </small>
              </ul>
          </ul>
        </section>

        <section>
          <h2>Future Works</h2>

          <ul>
            <li>Assess different strategies for task allocation</li>
            <li>Compare different clustering algorithms</li>
            <li>Use JNI to access MATLAB&reg; libraries</li>
            <li>Evaluate the feasibility of implementing a Rescue team in
              MATLAB&reg;</li>
          </ul>
        </section>

        <section>
          <h2>Thanks</h2>


          This workshop was created by the Joint Rescue Forces:

          <div align=center>
            <img src=images/JointRescueForcesTeam.jpg width=600>
          </div>

          <small>This initiative is part <br> of the RoboCup
            Federation Support for Collaborations program.
          </small>

          <div align=right>
            <img src=images/RoboCupRescue.jpg width=150>
          </div>

        </section>
      </section>

      <!-- ========================================================= -->


    </div>
  </div>

  <script src="reveal/lib/js/head.min.js"></script>
  <script src="reveal/js/reveal.min.js"></script>

  <script>
			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls : true,
				progress : true,
				history : false,
				center : true,

				theme : Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition : Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies : [ {
					src : 'lib/js/classList.js',
					condition : function() {
						return !document.body.classList;
					}
				}, {
					src : 'plugin/markdown/showdown.js',
					condition : function() {
						return !!document.querySelector('[data-markdown]');
					}
				}, {
					src : 'plugin/markdown/markdown.js',
					condition : function() {
						return !!document.querySelector('[data-markdown]');
					}
				}, {
					src : 'plugin/highlight/highlight.js',
					async : true,
					callback : function() {
						hljs.initHighlightingOnLoad();
					}
				}, {
					src : 'plugin/zoom-js/zoom.js',
					async : true,
					condition : function() {
						return !!document.body.classList;
					}
				}, {
					src : 'plugin/notes/notes.js',
					async : true,
					condition : function() {
						return !!document.body.classList;
					}
				} ]
			});
		</script>



</body>
</html>
